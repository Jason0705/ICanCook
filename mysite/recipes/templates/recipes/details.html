{% extends "recipes/base.html" %}

{% block head_title %}
    {{ recipe.title }} | {{ block.super }}
{% endblock head_title %}

{% block content %}
    <div class='col-sm-6 col-sm-offset-3'>

        <!-- <img src='{{ recipe.image.url }}' class='img-responsive'/> -->

        <h1>{{ recipe.title }}<br/></h1>
        <small>{{ recipe.created }}</small>
        {{ recipe.image }}<br/>
        <p>Recipe ID: {{ recipe.rid }}</p>
        <p>Description: {{ recipe.description|linebreaks }}</p>
        <p>User ID: {{ recipe.userid }}</p>
        <p>Prep Time: {{ recipe.prep_time }}</p>

        <p>Ingredients:</p>
        <ul>
            {% for ingredient in recipe.ingredient_set.all %}
                <li>{{ ingredient.quantity }} {{ ingredient.quantity_type.name }} {{ ingredient.name }}</li>
            {% endfor %}
        </ul>

        <p>Steps:</p>
        <ul>
            {% for step in recipe.step_set.all %}
                <li>{{ step.description|linebreaks }}</li>
            {% endfor %}
        </ul>

        {% if user.is_authenticated and user.id == recipe.userid %}
            <p><a href="/recipes/{{ recipe.rid }}/edit/" class="btn btn-default">edit recipe</a></p>
            <p><a href="/recipes/{{ recipe.rid }}/delete/" class="btn btn-default">delete recipe</a></p>
        {% endif %}
        <p><a href="/recipes/" class="btn btn-default">Back</a></p>

        <hr/>

        <div class="fb-like" data-href="{{ request.build_absolute_uri }}" data-layout="button_count" data-action="like" data-size="small" data-show-faces="true"
             data-share="true"></div>

        <p>
            |<a href="https://twitter.com/home?status={{ share_string }}%20{{ request.build_absolute_uri }}">
            Share on Twitter
        </a>|

            <a href="http://www.reddit.com/submit?url={{ request.build_absolute_uri }}&title={{ share_string }}.">
                Share on Reddit
            </a>|
        </p>

        <hr/>

        <div class="fb-comments" data-href="{{ request.build_absolute_uri }}" data-numposts="5"></div>

    </div>
{% endblock content %}
