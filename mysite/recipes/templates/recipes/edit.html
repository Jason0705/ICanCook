{% extends "recipes/base.html" %}

{% block head_title %}
    Edit Recipe
{% endblock head_title %}

{% block content %}
    <div>
        <h1>Edit Recipe</h1>
        <form method='POST' action='/recipes/{{ rid }}/edit/'>
            {% csrf_token %}
            <h2>Edit Recipe</h2>
            {{ recipe_form.as_p }}
            <br>
            <h2>Edit Ingredients</h2>
            {{ ingredients_form.management_form }}
            <div class="ingredients">
                {% for form in ingredients_form %}
                    <div class="ingredient-container">
                        <div class="ingredient-field">
                            {{ form.name }}
                        </div>
                        <div class="ingredient-field">
                            {{ form.quantity }}
                        </div>
                        <div class="ingredient-field">
                            {{ form.quantity_type }}
                        </div>
                        <div>

                        </div>
                    </div>
                {% endfor %}
            </div>
            <br>
            <h2>Edit Steps</h2>
            <table>
                {% for form in steps_form %}
                    {{ form.as_p }}
                    <br>
                {% endfor %}
            </table>
            <input type='submit'>
            <p><a href="/recipes/{{ rid }}">cancel</a></p>
        </form>
    </div>

    <script>
        $(document).ready(function () {
            $('.ingredient-container').formset({
                prefix: '{{ ingredients_form.prefix }}'
            });
        });
    </script>
{% endblock content %}